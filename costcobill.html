<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Costco Luxury Splitter v3</title>
    <style>
      :root {
        --primary: #005da4;
        --accent: #e31837;
        --bg: #f0f2f5;
        --card-bg: rgba(255, 255, 255, 0.95);
        --healthy: #27ae60;
        --neutral: #f39c12;
        --indulgent: #d35400;
      }

      body {
        font-family:
          "Inter",
          -apple-system,
          sans-serif;
        background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
        min-height: 100vh;
        margin: 0;
        padding: 40px 20px;
        color: #2d3436;
      }

      .container {
        max-width: 1000px;
        margin: auto;
        background: var(--card-bg);
        padding: 40px;
        border-radius: 24px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        border-bottom: 2px solid #eee;
        padding-bottom: 20px;
      }

      .tabs {
        display: flex;
        gap: 8px;
        background: #eee;
        padding: 5px;
        border-radius: 12px;
        margin-bottom: 30px;
      }

      .tabs button {
        flex: 1;
        padding: 12px;
        cursor: pointer;
        border: none;
        border-radius: 8px;
        background: transparent;
        color: #666;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .tabs button.active {
        background: white;
        color: var(--primary);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 10px;
      }
      td {
        padding: 18px 15px;
        background: #fdfdfd;
        border-top: 1px solid #f0f0f0;
        border-bottom: 1px solid #f0f0f0;
        position: relative;
      }
      td:first-child {
        border-left: 1px solid #f0f0f0;
        border-radius: 12px 0 0 12px;
      }
      td:last-child {
        border-right: 1px solid #f0f0f0;
        border-radius: 0 12px 12px 0;
      }

      .item-row:hover td {
        background: #f0f7ff;
        cursor: help;
      }

      .tooltip {
        visibility: hidden;
        width: 260px;
        background-color: #2d3436;
        color: #fff;
        text-align: left;
        border-radius: 12px;
        padding: 15px;
        position: absolute;
        z-index: 10;
        bottom: 125%;
        left: 20px;
        opacity: 0;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        font-size: 0.85em;
        pointer-events: none;
      }

      .item-row:hover .tooltip {
        visibility: visible;
        opacity: 1;
        transform: translateY(-10px);
      }

      .health-badge {
        display: inline-block;
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.8em;
        margin-top: 8px;
        font-weight: bold;
      }
      .rating-healthy {
        background: var(--healthy);
      }
      .rating-neutral {
        background: var(--neutral);
      }
      .rating-indulgent {
        background: var(--indulgent);
      }

      .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }
      .person-card {
        background: white;
        padding: 25px;
        border-radius: 20px;
        border: 1px solid #eee;
        cursor: pointer;
        transition: 0.3s;
      }
      .person-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h2>COSTCO <span style="color: var(--accent)">LIST</span></h2>
        <div
          id="grand-total-display"
          style="font-size: 1.5em; font-weight: 800; color: var(--primary)"
        >
          $0.00
        </div>
      </header>

      <div class="tabs">
        <button onclick="changeView('ALL')" id="btn-ALL" class="active">
          All Items
        </button>
        <button onclick="changeView('ST')" id="btn-ST">ST</button>
        <button onclick="changeView('VM')" id="btn-VM">VM</button>
        <button onclick="changeView('TP')" id="btn-TP">TP</button>
        <button onclick="changeView('SUMMARY')" id="btn-SUMMARY">
          Pivot View
        </button>
      </div>

      <div id="summary-view" class="summary-grid hidden"></div>

      <div id="table-view">
        <table id="receiptTable">
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>

    <script>
      const items = [
        {
          code: "222017",
          desc: "DRAGON SUSHI RICE 5KG",
          price: 11.99,
          for: "ST",
          info: "High-quality short grain rice. Pantry staple.",
          health: "Neutral (Complex Carb)",
          rating: "neutral",
        },
        {
          code: "168324",
          desc: "THE SEED CO CANOLA OIL 5L",
          price: 12.99,
          for: "VM",
          info: "Versatile cooking oil with a high smoke point.",
          health: "Neutral (Processed Fats)",
          rating: "neutral",
        },
        {
          code: "196820",
          desc: "SEETARS RICE BRAN OIL 5L",
          price: 18.99,
          for: "ST",
          info: "Healthy oil rich in Vitamin E and antioxidants.",
          health: "Healthy (Heart Friendly)",
          rating: "healthy",
        },
        {
          code: "21359",
          desc: "NUTELLA 2X1KG",
          price: 24.99,
          for: "VM",
          info: "Chocolate hazelnut spread. High sugar content.",
          health: "Indulgent (Treat Only)",
          rating: "indulgent",
        },
        {
          code: "1843648",
          desc: "KS FRESH FABRIC SOFTENER 5.5L",
          price: 24.99,
          for: "VM",
          info: "Bulk softener for long-lasting clothing care.",
          health: "Cleaning Product",
          rating: "none",
        },
        {
          code: "168324",
          desc: "THE SEED CO CANOLA OIL 5L (2nd)",
          price: 12.99,
          for: "VM",
          info: "Second bottle of bulk cooking oil.",
          health: "Neutral",
          rating: "neutral",
        },
        {
          code: "148803",
          desc: "EASTCOAST APPLE JUICE 4L",
          price: 9.99,
          for: "ST",
          info: "Large volume fresh apple juice. No added sugar.",
          health: "Neutral (Natural Sugars)",
          rating: "neutral",
        },
        {
          code: "1843648",
          desc: "KS FRESH FABRIC SOFTENER 5.5L (2nd)",
          price: 24.99,
          for: "ST",
          info: "Kirkland Signature bulk softener for ST.",
          health: "Cleaning Product",
          rating: "none",
        },
        {
          code: "92916",
          desc: "DYNAMO PROF ODR ELIM LIQ 6L",
          price: 28.49,
          for: "VM",
          info: "Heavy duty laundry liquid with odor defense.",
          disc: "1.50",
          health: "Cleaning Product",
          rating: "none",
        },
        {
          code: "92916",
          desc: "DYNAMO PROF ODR ELIM LIQ 6L (2nd)",
          price: 28.49,
          for: "VM",
          info: "Second unit of deep cleaning detergent.",
          disc: "1.50",
          health: "Cleaning Product",
          rating: "none",
        },
        {
          code: "1170795",
          desc: "KS BATH TISSUE 48X270",
          price: 32.99,
          for: "VM",
          info: "Kirkland Signature premium 3-ply bath tissue.",
          health: "Essential Household",
          rating: "none",
        },
        {
          code: "240609",
          desc: "HELGAS LIGHT RYE 680G",
          price: 3.99,
          for: "VM",
          info: "Healthy rye bread, high in fiber.",
          health: "Healthy (Whole Grain)",
          rating: "healthy",
        },
        {
          code: "1834453",
          desc: "FEBREZE CAR MINI 5CT",
          price: 15.99,
          for: "VM",
          info: "Car air fresheners with odor-clear technology.",
          disc: "4.00",
          health: "Non-edible",
          rating: "none",
        },
        {
          code: "13270",
          desc: "BROCCOLINI 500G",
          price: 5.99,
          for: "ST",
          info: "Vitamin-rich green vegetable for healthy meals.",
          health: "Super Healthy",
          rating: "healthy",
        },
        {
          code: "16884",
          desc: "BABY COS LETTUCE 4PK",
          price: 4.99,
          for: "VM",
          info: "Crisp and refreshing salad base.",
          health: "Super Healthy",
          rating: "healthy",
        },
        {
          code: "113380",
          desc: "CAULI BLOSSOM 500G",
          price: 6.99,
          for: "VM",
          info: "Sweet cauliflower variant, great for roasting.",
          health: "Super Healthy",
          rating: "healthy",
        },
        {
          code: "239051",
          desc: "PREMIUM BEEF SAUSAGES 2KG",
          price: 19.99,
          for: "TP",
          info: "Bulk pack of high protein beef sausages.",
          health: "Indulgent (Processed Meat)",
          rating: "indulgent",
        },
        {
          code: "97035",
          desc: "SP RUSTIC PORK SAUSAGE",
          price: 27.03,
          for: "TP",
          info: "Specialty pork sausages with rustic seasoning.",
          health: "Indulgent (High Sodium)",
          rating: "indulgent",
        },
        {
          code: "54047",
          desc: "BREF BLUE ACTIVE 9X50G",
          price: 21.99,
          for: "VM",
          info: "Powerful toilet bowl cleaner and freshener.",
          health: "Cleaning Product",
          rating: "none",
        },
        {
          code: "201491",
          desc: "SB HVY DTY SCRUB SPNG 24P",
          price: 24.99,
          for: "VM",
          info: "Heavy duty scouring sponges for cleaning.",
          health: "Non-edible",
          rating: "none",
        },
        {
          code: "41954",
          desc: "GILLETTE PROSHIELD + REFILLS",
          price: 49.99,
          for: "VM",
          info: "Premium razor system with lubrication shields.",
          disc: "17.00",
          health: "Personal Care",
          rating: "none",
        },
        {
          code: "159980",
          desc: "SENSODYNE REPAIR & PROTECT 4PK",
          price: 26.99,
          for: "VM",
          info: "Dermatologist and dentist recommended for sensitivity.",
          disc: "7.00",
          health: "Personal Care",
          rating: "none",
        },
        {
          code: "112582",
          desc: "CETAPHIL LOTION 2X1L",
          price: 37.99,
          for: "VM",
          info: "Gentle moisturizing lotion for sensitive skin.",
          health: "Personal Care",
          rating: "none",
        },
        {
          code: "106812",
          desc: "OMO TRIPLE CAPS 100CT",
          price: 46.99,
          for: "ST",
          info: "High-efficiency laundry detergent capsules.",
          health: "Cleaning Product",
          rating: "none",
        },
        {
          code: "44771",
          desc: "KS FR BUTTER MADELEINES 780G",
          price: 19.99,
          for: "VM",
          info: "Traditional French butter cakes. Very rich.",
          health: "Indulgent (High Fat)",
          rating: "indulgent",
        },
        {
          code: "230234",
          desc: "NIVEA INVISIBLE MEN ROLL 6X",
          price: 12.99,
          for: "VM",
          info: "Antiperspirant that prevents white marks on clothes.",
          health: "Personal Care",
          rating: "none",
        },
        {
          code: "227935",
          desc: "PROLIVE PROBIOTIC 30X63ML",
          price: 14.99,
          for: "ST",
          info: "Supports gut flora and digestive health.",
          health: "Healthy (Gut Support)",
          rating: "healthy",
        },
      ];

      const grandTotal = items.reduce((s, i) => s + i.price, 0);

      function changeView(view) {
        document
          .querySelectorAll(".tabs button")
          .forEach((b) => b.classList.remove("active"));
        document.getElementById(`btn-${view}`).classList.add("active");
        const tableView = document.getElementById("table-view");
        const summaryView = document.getElementById("summary-view");

        if (view === "SUMMARY") {
          tableView.classList.add("hidden");
          summaryView.classList.remove("hidden");
          renderSummary();
        } else {
          summaryView.classList.add("hidden");
          tableView.classList.remove("hidden");
          renderTable(view);
        }
      }

      function renderTable(filter) {
        const body = document.getElementById("tableBody");
        body.innerHTML = "";
        let viewTotal = 0;

        items.forEach((item) => {
          if (filter === "ALL" || item.for === filter) {
            viewTotal += item.price;
            const row = body.insertRow();
            row.className = "item-row";
            row.innerHTML = `
                    <td>
                        <div class="tooltip">
                            <strong>Details:</strong> ${item.info}<br>
                            ${item.rating !== "none" ? `<span class="health-badge rating-${item.rating}">${item.health}</span>` : ""}
                        </div>
                        <span style="font-weight:600">${item.desc}</span>
                        ${item.disc ? `<br><small style="color:var(--accent); font-weight:bold">-$${item.disc} DISCOUNT APPLIED</small>` : ""}
                    </td>
                    <td><span style="background:#e8f0fe; color:#005da4; padding:4px 10px; border-radius:10px; font-size:0.8em; font-weight:bold">${item.for}</span></td>
                    <td style="text-align:right; font-family:monospace; font-weight:700">$${item.price.toFixed(2)}</td>
                `;
          }
        });
        document.getElementById("grand-total-display").innerText =
          `$${viewTotal.toFixed(2)}`;
      }

      function renderSummary() {
        const container = document.getElementById("summary-view");
        container.innerHTML = "";
        ["ST", "VM", "TP"].forEach((p) => {
          const pTotal = items
            .filter((i) => i.for === p)
            .reduce((s, i) => s + i.price, 0);
          const percent = ((pTotal / grandTotal) * 100).toFixed(0);
          const card = document.createElement("div");
          card.className = "person-card";
          card.onclick = () => changeView(p);
          card.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:center">
                    <strong style="color:var(--primary)">USER: ${p}</strong>
                    <span style="font-size:0.8em; color:#999">${percent}% share</span>
                </div>
                <div style="font-size:2em; font-weight:800; margin:15px 0">$${pTotal.toFixed(2)}</div>
                <div style="height:6px; background:#eee; border-radius:3px">
                    <div style="width:${percent}%; height:100%; background:var(--primary); border-radius:3px"></div>
                </div>
            `;
          container.appendChild(card);
        });
        document.getElementById("grand-total-display").innerText =
          `$${grandTotal.toFixed(2)}`;
      }

      changeView("ALL");
    </script>
  </body>
</html>
